<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homework</title>
    <style>
        [type=radio] {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }

        /* IMAGE STYLES */
        [type=radio]+img {
            cursor: pointer;
            width: 240px;
            height: 200px;
            margin-right: 15px;
        }

        /* CHECKED STYLES */
        [type=radio]:checked+img {
            outline: 2px solid rgb(145, 230, 111);
        }
    </style>
    <script src="./js/jquery.min.js"></script>
</head>

<body>
    <canvas id="canvasLab" width="480" height="400" ></canvas>


    <div style="margin-bottom: 30px;">
        <a id="aDownload" href="#" download="downLoad.jpg">下載圖片</a>
    </div>

    <p><h1>選取圖片</h1></p>
    <label>
        <input type="radio" name="img" value="small">
        <img id="img1" src="./img/1.jpg" class="click">
    </label>
    <label>
        <input type="radio" name="img" value="small">
        <img id="img1" src="./img/2.jpg" class="click">
    </label>
    <label>
        <input type="radio" name="img" value="small">
        <img id="img1" src="./img/3.jpg" class="click">
    </label>
    <label>
        <input type="radio" name="img" value="small">
        <img id="img1" src="./img/4.jpg" class="click">
    </label>
    <label>
        <input type="radio" name="img" value="small">
        <img id="img2" src="./img/5.jpg" class="click">
    </label>
    <label>
        <input type="radio" name="img" value="small">
        <img id="img3" src="./img/6.jpg" class="click">
    </label>
    <label>
        <input type="radio" name="img" value="small">
        <img id="img3" src="./img/7.jpg" class="click">
    </label>

    <!-- 選圖影像 -->
    <img id="img" src="./img/1.jpg" class="click" style="display: none;">
    <!-- <img id="img" src="./img/1.jpg" class="click"> -->


    <p><h1>文字與樣式</h1></p>
    <form name='form' id='form' style="margin-top: 30px;">
        <input type='text' name='text' id='text' />
        <input type='button' name='submit' value='放置下方' onclick='post()' />
        <input type='button' name='submit' value='文字偏上' onclick='p()' />
    </form>
    
    <!-- <p>step 2 輸入文字</p>
    <form name='form' id='form' style="margin-top: 30px;">
        <input type='text' name='text' id='text' />
        <input type='button' name='submit' value='送出' onclick='p()' />
    </form> -->



    <script>
        var c = document.getElementById("canvasLab");
        var ctx = c.getContext("2d");

        //選擇圖片
        $(".click").click(function () {
            ctx.clearRect(0, 0, 480, 400);
            $("#img").attr("src", $(this).attr("src"));

            ctx.drawImage(img, 0, 0, 480, 400);

            aDownload.href = c.toDataURL("image/jpeg", 2);
        });

        function post() {
            ctx.clearRect(0, 0, 480, 400);
            ctx.drawImage(img, 0, 0, 480, 400);
            const textElement = document.getElementById('text');
            var text = textElement.value;
            console.log(text)
            // 生成文字
            // 置中對齊輸出文字
            ctx.font = "48px 標楷體";
            ctx.textBaseline = "bottom";
            ctx.textAlign = "left";

            //設定漸層
            var gradient = ctx.createLinearGradient(0, 0, c.width, 0);
            gradient.addColorStop("0", "magenta");
            gradient.addColorStop("0.5", "yellow");
            gradient.addColorStop("1.0", "red");

            // 填滿漸層
            ctx.fillStyle = gradient;
            ctx.fillText(text, 10, 350);

            aDownload.href = c.toDataURL("image/jpeg", 1);
        }
        
        
        function p() {
            ctx.clearRect(0, 0, 480, 400);
            ctx.drawImage(img, 0, 0, 480, 400);
            const textElement = document.getElementById('text');
            var text = textElement.value;
            console.log(text)
            // 生成文字
            // 置中對齊輸出文字
            ctx.font = "50px 標楷體";
            ctx.textBaseline = "top";
            ctx.textAlign = "left";
            

            //設定漸層
            var gradient = ctx.createLinearGradient(0, 0, c.width, 0);
            gradient.addColorStop("0", "magenta");
            gradient.addColorStop("0.5", "blue");
            gradient.addColorStop("1.0", "green");
            
            // 填滿漸層
            ctx.fillStyle = gradient;
            ctx.fillText(text, 55, 89);

            aDownload.href = c.toDataURL("image/jpeg", 1);
        }
    </script>
</body>

</html>